<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <defs>
    <style>
      .panel{fill:#fff;stroke:#E5E7EB;stroke-width:2}
      .lane{fill:#F9FBFF;stroke:#D8E3F7;stroke-width:2}
      .pill{fill:#EEF4FF;stroke:#BDD3FF;stroke-width:2}
      .store{fill:#F3F6FA;stroke:#CBD5E1;stroke-width:2}
      .t1{font:800 26px/1.2 Inter,Segoe UI,Roboto,Arial,sans-serif}
      .t2{font:600 15px/1.2 Inter,Segoe UI,Roboto,Arial,sans-serif; fill:#475569}
      .lh{font:800 18px/1.2 Inter,Segoe UI,Roboto,Arial,sans-serif}
      .lbl{font:700 15px/1.2 Inter,Segoe UI,Roboto,Arial,sans-serif}
      .mut{font:500 13px/1.2 Inter,Segoe UI,Roboto,Arial,sans-serif; fill:#64748B}
      .cap{font:500 14px/1.4 Inter,Segoe UI,Roboto,Arial,sans-serif; fill:#334155}
      .arr{stroke:#94A3B8;stroke-width:2.6;marker-end:url(#m)}
      .num{fill:#0B57D0; font:800 13px/1 Inter,Segoe UI,Roboto,Arial,sans-serif}
      .chip{fill:#F0FDF4; stroke:#BBF7D0}
      .chiptx{font:700 12px/1.2 Inter,Segoe UI,Roboto,Arial,sans-serif; fill:#14532D}
    </style>
    <marker id="m" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 12,6 0,12Z" fill="#94A3B8"/>
    </marker>
  </defs>

  <!-- Marco general -->
  <rect x="30" y="30" width="1340" height="780" rx="16" class="panel"/>
  <text x="700" y="70" text-anchor="middle" class="t1">System Architecture</text>
  <text x="700" y="95" text-anchor="middle" class="t2">Ingest → Contextual reasoning → Normative adaptation → Traceability / audit</text>

  <!-- L1 -->
  <rect x="70" y="120" width="1260" height="120" rx="14" class="lane"/>
  <text x="100" y="150" class="lh">L1 — Ingest</text>
  <text x="100" y="172" class="mut">Secure upload · OCR/Parsing · Metadata extraction</text>
  <rect x="460" y="145" width="210" height="58" rx="10" class="pill"/>
  <text x="565" y="180" text-anchor="middle" class="lbl">Document Intake</text>
  <rect x="690" y="145" width="210" height="58" rx="10" class="pill"/>
  <text x="795" y="180" text-anchor="middle" class="lbl">Normalization</text>
  <rect x="920" y="145" width="210" height="58" rx="10" class="pill"/>
  <text x="1025" y="180" text-anchor="middle" class="lbl">Entity Extract</text>
  <text x="435" y="180" class="num">L1</text>
  <line x1="700" y1="230" x2="700" y2="260" class="arr"/>

  <!-- L2 -->
  <rect x="70" y="260" width="1260" height="150" rx="14" class="lane"/>
  <text x="100" y="290" class="lh">L2 — Contextual Reasoning</text>
  <text x="100" y="312" class="mut">Jurisdiction detection · Retrieval/similarity · Risk & consistency checks</text>
  <rect x="300" y="310" width="240" height="66" rx="10" class="pill"/>
  <text x="420" y="350" text-anchor="middle" class="lbl">Jurisdiction Classifier</text>
  <rect x="560" y="310" width="240" height="66" rx="10" class="pill"/>
  <text x="680" y="350" text-anchor="middle" class="lbl">Context Retrieval</text>
  <rect x="820" y="310" width="240" height="66" rx="10" class="pill"/>
  <text x="940" y="350" text-anchor="middle" class="lbl">Reasoning Engine</text>
  <text x="270" y="345" class="num">L2</text>
  <ellipse cx="1180" cy="325" rx="75" ry="25" class="store"/>
  <rect x="1105" y="325" width="150" height="55" class="store"/>
  <ellipse cx="1180" cy="375" rx="75" ry="25" class="store"/>
  <text x="1180" y="350" text-anchor="middle" class="lbl">Legal Corpus</text>
  <text x="1180" y="370" text-anchor="middle" class="mut">statutes · case law</text>
  <line x1="700" y1="410" x2="700" y2="440" class="arr"/>

  <!-- L3 -->
  <rect x="70" y="440" width="1260" height="160" rx="14" class="lane"/>
  <text x="100" y="470" class="lh">L3 — Normative Adaptation</text>
  <text x="100" y="492" class="mut">Clause selection & drafting · Policy rules · Human-in-the-loop</text>
  <rect x="300" y="500" width="240" height="66" rx="10" class="pill"/>
  <text x="420" y="540" text-anchor="middle" class="lbl">Clause Recommender</text>
  <rect x="560" y="500" width="240" height="66" rx="10" class="pill"/>
  <text x="680" y="540" text-anchor="middle" class="lbl">Policy / Rules Engine</text>
  <rect x="820" y="500" width="240" height="66" rx="10" class="pill"/>
  <text x="940" y="525" text-anchor="middle" class="lbl">Attorney Review</text>
  <text x="940" y="545" text-anchor="middle" class="mut">approval & edits</text>
  <ellipse cx="180" cy="505" rx="70" ry="25" class="store"/>
  <rect x="110" y="505" width="140" height="50" class="store"/>
  <ellipse cx="180" cy="550" rx="70" ry="25" class="store"/>
  <text x="180" y="525" text-anchor="middle" class="lbl">Policy DB</text>
  <text x="180" y="545" text-anchor="middle" class="mut">templates · rules</text>
  <rect x="1100" y="495" rx="10" ry="10" width="150" height="32" class="chip"/>
  <text x="1175" y="515" text-anchor="middle" class="chiptx">Human-in-the-Loop</text>
  <line x1="700" y1="590" x2="700" y2="620" class="arr"/>
  <text x="270" y="535" class="num">L3</text>

  <!-- L4 -->
  <rect x="70" y="620" width="1260" height="100" rx="14" class="lane"/>
  <text x="100" y="655" class="lh">L4 — Traceability / Audit</text>
  <rect x="460" y="640" width="240" height="48" rx="10" class="pill"/>
  <text x="580" y="667" text-anchor="middle" class="lbl">Provenance Record</text>
  <rect x="720" y="640" width="240" height="48" rx="10" class="pill"/>
  <text x="840" y="667" text-anchor="middle" class="lbl">Decision Log</text>
  <ellipse cx="1210" cy="650" rx="75" ry="25" class="store"/>
  <rect x="1135" y="650" width="150" height="50" class="store"/>
  <ellipse cx="1210" cy="700" rx="75" ry="25" class="store"/>
  <text x="1210" y="672" text-anchor="middle" class="lbl">Audit Ledger</text>
  <text x="1210" y="692" text-anchor="middle" class="mut">WORM / hash-chain</text>
  <text x="435" y="665" class="num">L4</text>

  <!-- Caption -->
  <text x="700" y="770" text-anchor="middle" class="cap">Figure 3 — Expanded layered view (L1–L4) of ingestion, reasoning, adaptation, and traceability/audit.</text>
</svg>
