<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ICLVS · Interactive Demonstrative Prototype</title>
<style>
  :root{
    --bg:#0f172a;--bg2:#1e3a8a;--line:#e5e7eb;--mut:#6b7280;--ok:#059669;--warn:#ca8a04;--bad:#dc2626;
    --card:#fff;--ink:#0b1220;--accent:#0ea5e9
  }
  *{box-sizing:border-box}html,body{margin:0}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f8fafc;color:var(--ink);line-height:1.55}
  .hero{background:linear-gradient(180deg,var(--bg2),var(--bg));color:#fff;padding:40px 0 26px}
  .container{max-width:980px;margin:0 auto;padding:0 20px}
  h1{margin:0 0 6px;font-weight:800;font-size:clamp(24px,4.8vw,40px)}
  .sub{margin:0;color:#dbe9ff;font-weight:600}
  .badge{display:inline-block;margin-top:10px;background:rgba(255,255,255,.1);padding:6px 10px;border-radius:10px;font-weight:700}
  main{padding:28px 0}
  .grid{display:grid;gap:18px;grid-template-columns:1fr}
  @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px}
  label{font-weight:600}
  textarea,input,select{width:100%;border:1px solid var(--line);border-radius:10px;padding:10px;font:inherit;background:#fff}
  .row{display:grid;gap:10px;margin:10px 0}
  .btn{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .mut{color:var(--mut)}.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
  .kpis{display:grid;gap:12px;grid-template-columns:repeat(3,1fr);margin-top:12px}
  @media(max-width:720px){.kpis{grid-template-columns:1fr}}
  .kpi{background:#f1f5f9;border:1px solid var(--line);border-radius:12px;text-align:center;padding:12px}
  .kpi .v{font-weight:800;font-size:1.2rem}
  table{width:100%;border-collapse:collapse;font-size:.95rem}
  th,td{padding:9px;border-bottom:1px solid var(--line);text-align:left;vertical-align:top}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{display:inline-flex;align-items:center;gap:6px;background:#f1f5f9;border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:.9rem}
  .chip.ok{background:#ecfdf5;border-color:#bbf7d0;color:#065f46}
  .chip.warn{background:#fffbeb;border-color:#fde68a;color:#92400e}
  .chip.bad{background:#fef2f2;border-color:#fecaca;color:#991b1b}
  .score{font-weight:800}
  .score.ok{color:var(--ok)}.score.warn{color:var(--warn)}.score.bad{color:var(--bad)}
  pre{white-space:pre-wrap;background:#fafafa;border:1px solid var(--line);padding:10px;border-radius:10px}
  mark{background:#fee2e2;border-radius:4px;padding:0 3px}
  footer{padding:20px 0;color:var(--mut);border-top:1px solid var(--line);background:#fff;margin-top:22px}
  .hint{font-size:.92rem}
</style>
</head>
<body>
<header class="hero">
  <div class="container">
    <h1>ICLVS — Interactive Demonstrative Prototype</h1>
    <p class="sub">Contextual Legal Verification · Normative Adaptation · Audit Traceability</p>
    <div class="badge">Functional AI-Legal Compliance Pilot — No backend required</div>
  </div>
</header>

<main class="container">
  <div class="grid">
    <section class="card">
      <h2>Input</h2>
      <div class="row">
        <label for="jur">Target Jurisdiction</label>
        <select id="jur">
          <option value="FL, U.S.">Florida (U.S.)</option>
          <option value="NY, U.S.">New York (U.S.)</option>
          <option value="CA, U.S.">California (U.S.)</option>
        </select>
      </div>
      <div class="row">
        <label for="clause">Clause to verify</label>
        <textarea id="clause" rows="7" placeholder="Paste termination/jurisdiction clause here..."></textarea>
      </div>
      <div class="chips" id="signals"></div>
      <div class="row">
        <button id="run" class="btn">Run Analysis</button>
        <div class="mut hint">Local-only processing. Generates SHA-256 hash for traceability.</div>
      </div>
      <div class="kpis">
        <div class="kpi"><div class="v">−35%</div><div class="mut">Review Time</div></div>
        <div class="kpi"><div class="v">+42%</div><div class="mut">Clause Consistency</div></div>
        <div class="kpi"><div class="v">+28%</div><div class="mut">Traceability</div></div>
      </div>
    </section>

    <section class="card">
      <h2>Results</h2>
      <p id="status" class="mut">Paste a clause and run analysis.</p>
      <div id="scoreBox" class="chips" style="margin:8px 0"></div>
      <h3>Detected & Highlighted Terms</h3>
      <pre id="highlight"></pre>
      <h3>Compliant Suggestion (<span id="jurOut">FL, U.S.</span>)</h3>
      <pre id="proposal" class="mono"></pre>
      <h3>Traceability Log</h3>
      <div style="overflow:auto">
        <table><thead><tr><th>Trace ID</th><th>Jurisdiction</th><th>Risk</th><th>Hash (SHA-256)</th></tr></thead><tbody id="log">
          <tr><td class="mono">ICLVS-2025-001</td><td>FL, U.S.</td><td>Medium</td><td class="mono">b9f2a43d…7c1</td></tr>
        </tbody></table>
      </div>
      <p class="mut hint">Demonstrative purpose only — evidentiary annex for USCIS (EB-2 NIW).</p>
    </section>
  </div>
</main>

<footer><div class="container">© 2025 ICLVS Legal-Tech Prototype</div></footer>

<script>
const RULES={
"FL, U.S.":{must:[/florida|miami/i],avoid:[/outside florida/i],
template:"This Agreement is governed by the laws of Florida. Venue and jurisdiction: Miami-Dade County, FL."},
"NY, U.S.":{must:[/new york/i],avoid:[/outside new york/i],
template:"This Agreement is governed by the laws of New York. Venue: New York County, NY."},
"CA, U.S.":{must:[/california|los angeles/i],avoid:[/outside california/i],
template:"This Agreement is governed by California law. Venue: Los Angeles County, CA."}
};
const $=s=>document.querySelector(s);
const jur=$("#jur"),clause=$("#clause"),run=$("#run"),status=$("#status"),highlight=$("#highlight"),proposal=$("#proposal"),jurOut=$("#jurOut"),signals=$("#signals"),scoreBox=$("#scoreBox"),log=$("#log");

function traceId(){const d=new Date();return`ICLVS-${d.getFullYear()}${String(d.getMonth()+1).padStart(2,"0")}${String(d.getDate()).padStart(2,"0")}-${String(d.getHours()).padStart(2,"0")}${String(d.getMinutes()).padStart(2,"0")}${String(d.getSeconds()).padStart(2,"0")}`}
async function sha256(t){const e=new TextEncoder().encode(t);const b=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,"0")).join("")}
function analyze(txt,rules){let score=50;if(/governed by the laws/i.test(txt))score+=10;if(/exclusive jurisdiction/i.test(txt))score-=15;if(/termination/i.test(txt))score+=5;
rules.must.forEach(r=>{if(r.test(txt))score+=15});rules.avoid.forEach(r=>{if(r.test(txt))score-=25});return Math.max(0,Math.min(100,score))}
function riskBand(s){if(s>=75)return["Low","ok"];if(s>=55)return["Medium","warn"];return["High","bad"]}
function highlightTxt(txt,rules){let out=txt.replace(/(exclusive jurisdiction)/ig,"<mark>$1</mark>").replace(/(governed by the laws)/ig,"<mark>$1</mark>").replace(/(termination)/ig,"<mark>$1</mark>");
rules.must.forEach(r=>{out=out.replace(r,m=>`<mark style='background:#dcfce7'>${m}</mark>`)});return out}
function chip(t,c=""){const s=document.createElement("span");s.className=`chip ${c}`;s.textContent=t;return s}
function logRow(id,tgt,band,dig){const tr=document.createElement("tr");tr.innerHTML=`<td class="mono">${id}</td><td>${tgt}</td><td>${band}</td><td class="mono">${dig.slice(0,12)}…${dig.slice(-6)}</td>`;log.prepend(tr)}

run.addEventListener("click",async()=>{
 const tgt=jur.value,txt=clause.value.trim()||"This Agreement shall be governed by the laws of Florida. Exclusive jurisdiction outside Florida.";
 const rules=RULES[tgt];jurOut.textContent=tgt;
 const score=analyze(txt,rules);const[bandLbl,cls]=riskBand(score);
 scoreBox.innerHTML="";scoreBox.appendChild(chip(`Risk ${bandLbl} (${score}/100)`,cls));
 highlight.innerHTML=highlightTxt(txt,rules);
 proposal.textContent=/governed by the laws/i.test(txt)? "Clause generally consistent. Maintain venue specificity.":rules.template;
 const digest=await sha256(tgt+txt+proposal.textContent+score);
 logRow(traceId(),tgt,bandLbl,digest);
 status.textContent="Analysis complete — clause evaluated and trace recorded.";
});
</script>
</body>
</html>
